author: Petr Salinger <Petr.Salinger@seznam.cz>

Fixes FTBFS on GNU/kFreeBSD by creating new Q_OS_GLIBC.

--- a/src/corelib/global/qglobal.h
+++ b/src/corelib/global/qglobal.h
@@ -123,6 +123,12 @@
 #  define Q_OS_RELIANT
 #elif defined(__linux__) || defined(__linux)
 #  define Q_OS_LINUX
+#  define Q_OS_GLIBC
+#elif defined(__GNU_HURD__) || defined(__GNU__)
+#  define Q_OS_HURD
+#  define Q_OS_GLIBC
+#elif defined(__GLIBC__)
+#  define Q_OS_GLIBC
 #elif defined(__FreeBSD__) || defined(__DragonFly__)
 #  define Q_OS_FREEBSD
 #  define Q_OS_BSD4
@@ -143,8 +149,6 @@
 #  define Q_OS_AIX
 #elif defined(__Lynx__)
 #  define Q_OS_LYNX
-#elif defined(__GNU__)
-#  define Q_OS_HURD
 #elif defined(__DGUX__)
 #  define Q_OS_DGUX
 #elif defined(__QNXNTO__)
--- a/src/corelib/plugin/qlibrary.cpp
+++ b/src/corelib/plugin/qlibrary.cpp
@@ -291,11 +291,11 @@
 
 #if defined(Q_OS_UNIX) && !defined(Q_OS_MAC)
 
-#if defined(Q_OS_FREEBSD) || defined(Q_OS_LINUX)
+#if defined(Q_OS_FREEBSD) || defined(Q_OS_GLIBC)
 #  define USE_MMAP
 #  include <sys/types.h>
 #  include <sys/mman.h>
-#endif // Q_OS_FREEBSD || Q_OS_LINUX
+#endif // Q_OS_FREEBSD || Q_OS_GLIBC
 
 static long qt_find_pattern(const char *s, ulong s_len,
                              const char *pattern, ulong p_len)
--- a/src/corelib/tools/qlocale.cpp
+++ b/src/corelib/tools/qlocale.cpp
@@ -61,7 +61,7 @@
 #include <qdebug.h>
 #include <time.h>
 
-#if defined(Q_OS_LINUX) && !defined(__UCLIBC__)
+#if defined(Q_OS_GLIBC) && !defined(__UCLIBC__)
 #    include <fenv.h>
 #endif
 
@@ -5927,7 +5927,7 @@
     _control87(MCW_EM, MCW_EM);
 #endif
 
-#if defined(Q_OS_LINUX) && !defined(__UCLIBC__)
+#if defined(Q_OS_GLIBC) && !defined(__UCLIBC__)
     fenv_t envp;
     feholdexcept(&envp);
 #endif
@@ -5943,7 +5943,7 @@
 #endif //_M_X64
 #endif //Q_OS_WIN
 
-#if defined(Q_OS_LINUX) && !defined(__UCLIBC__)
+#if defined(Q_OS_GLIBC) && !defined(__UCLIBC__)
     fesetenv(&envp);
 #endif
 
